/**
 * emmett - A custom events emitter for Node.js and the browser
 * @version v2.1.2
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function e(e){var t,n,r=[];for(t=0,n=e.length;n>t;t++)r.push(e[t].handler);return r}var t={once:"boolean",scope:"object"},n=function(){this._enabled=!0,this._children=[],this._handlers={},this._handlersAll=[]};n.prototype.on=function(e,r,i){var h,s,l,o,d,a;if("function"==typeof r){for(d="string"==typeof e?[e]:e,h=0,s=d.length;h!==s;h+=1)if(o=d[h]){this._handlers[o]||(this._handlers[o]=[]),a={handler:r};for(l in i||{})t[l]&&(a[l]=i[l]);this._handlers[o].push(a)}}else if(e&&"object"==typeof e&&!Array.isArray(e))for(o in e)n.prototype.on.call(this,o,e[o],r);else{if("function"!=typeof e)throw new Error("Wrong arguments.");a={handler:e};for(l in i||{})t[l]&&(a[l]=i[l]);this._handlersAll.push(a)}return this},n.prototype.once=function(e,t,n){if("function"==typeof t)n=n||{},n.once=!0,this.on(e,t,n);else{if((!e||"object"!=typeof e||Array.isArray(e))&&"function"!=typeof e)throw new Error("Wrong arguments.");t=t||{},t.once=!0,this.on(e,t)}return this},n.prototype.off=function(e,t){var n,r,i,h,s,l,o,d="string"==typeof e?[e]:e;if(1===arguments.length&&"function"==typeof d){t=arguments[0];for(s in this._handlers){for(l=[],n=0,r=this._handlers[s].length;n!==r;n+=1)this._handlers[s][n].handler!==t&&l.push(this._handlers[s][n]);this._handlers[s]=l}for(l=[],n=0,r=this._handlersAll.length;n!==r;n+=1)this._handlersAll[n].handler!==t&&l.push(this._handlersAll[n]);this._handlersAll=l}else if(2===arguments.length)for(n=0,r=d.length;n!==r;n+=1){if(o=d[n],this._handlers[o]){for(l=[],i=0,h=this._handlers[o].length;i!==h;i+=1)this._handlers[o][i].handler!==t&&l.push(this._handlers[o][i]);this._handlers[o]=l}this._handlers[o]&&0===this._handlers[o].length&&delete this._handlers[o]}return this},n.prototype.unbindAll=function(){var e;this._handlersAll=[];for(e in this._handlers)delete this._handlers[e];return this},n.prototype.emit=function(e,t){var n,r,i,h,s,l,o,d,a,f,c="string"==typeof e?[e]:e;if(!this._enabled)return this;for(t=void 0===t?{}:t,n=0,r=c.length;n!==r;n+=1)if(f=c[n],a=(this._handlers[f]||[]).concat(this._handlersAll),a.length){for(o={type:f,data:t||{},target:this},l=[],i=0,h=a.length;i!==h;i+=1)(this._handlers[f]&&this._handlers[f].indexOf(a[i])>=0||this._handlersAll.indexOf(a[i])>=0)&&(a[i].handler.call("scope"in a[i]?a[i].scope:this,o),a[i].once&&l.push(a[i]));for(s=0;s<l.length;s++)this._handlers[f].splice(l.indexOf(l[s]),1)}for(n=0,r=this._children.length;n!==r;n+=1)d=this._children[n],d.emit.apply(d,arguments);return this},n.prototype.child=function(){var e=this,t=new n;return t.on("emmett:kill",function(){if(e._children)for(var n=0,r=e._children.length;r>n;n++)if(e._children[n]===t){e._children.splice(n,1);break}}),this._children.push(t),t},n.prototype.listeners=function(t){var n,r,i,h=[];if(t)for(h=e(this._handlers[t]),r=0,i=this._children.length;i>r;r++)h=h.concat(this._children[r].listeners(t));else{h=e(this._handlersAll);for(n in this._handlers)h=h.concat(e(this._handlers[n]));for(r=0,i=this._children.length;i>r;r++)h=h.concat(this._children[r].listeners())}return h},n.prototype.kill=function(){if(this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._enabled=!1,this._children)for(var e=0,t=this._children.length;t>e;e++)this._children[e].kill();this._children=null},n.prototype.disable=function(){return this._enabled=!1,this},n.prototype.enable=function(){return this._enabled=!0,this},n.version="2.1.2","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=n),exports.Emitter=n):"function"==typeof define&&define.amd?define("emmett",[],function(){return n}):this.Emitter=n}).call(this);