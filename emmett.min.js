/**
 * emmett - A custom events emitter for Node.js and the browser
 * @version v2.1.2
 * @link https://github.com/jacomyal/emmett
 * @license MIT
 */
(function(){"use strict";function e(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)r[n]=t[n];return r}function t(e){return e&&"object"==typeof e&&!Array.isArray(e)&&!(e instanceof Function)}var n={once:"boolean",scope:"object"},r=0,s=function(){this._enabled=!0,this._handlers={},this._handlersAll=[]};s.prototype.on=function(e,i,h){var l,o,a,d,f,u;if("function"==typeof i){for(f=[].concat(e),l=0,o=f.length;o>l;l++)if(d=f[l]){this._handlers[d]||(this._handlers[d]=[]),u={order:r++,handler:i};for(a in h||{})n[a]&&(u[a]=h[a]);u.once&&(u.parent=this._handlers[d]),this._handlers[d].push(u)}}else if(t(e))for(d in e)s.prototype.on.call(this,d,e[d],i);else{if("function"!=typeof e)throw new Error("Emitter.on: wrong arguments.");u={order:r,handler:e};for(a in h||{})n[a]&&(u[a]=h[a]);u.once&&(u.parent=this._handlersAll),this._handlersAll.push(u)}return this},s.prototype.once=function(){var n=Array.prototype.slice.call(arguments),r=n.length-1;return t(n[r])&&n.length>1?n[r]=e(n[r],{once:!0}):n.push({once:!0}),this.on.apply(this,n)},s.prototype.off=function(e,t){var n,r,s,i,h,l,o,a="string"==typeof e?[e]:e;if(1===arguments.length&&"function"==typeof a){t=arguments[0];for(h in this._handlers){for(l=[],n=0,r=this._handlers[h].length;r>n;n++)this._handlers[h][n].handler!==t&&l.push(this._handlers[h][n]);this._handlers[h]=l,0===this._handlers[h].length&&delete this._handlers[h]}for(l=[],n=0,r=this._handlersAll.length;r>n;n++)this._handlersAll[n].handler!==t&&l.push(this._handlersAll[n]);this._handlersAll=l}else if(2===arguments.length)for(n=0,r=a.length;r>n;n++){if(o=a[n],this._handlers[o]){for(l=[],s=0,i=this._handlers[o].length;i>s;s++)this._handlers[o][s].handler!==t&&l.push(this._handlers[o][s]);this._handlers[o]=l}this._handlers[o]&&0===this._handlers[o].length&&delete this._handlers[o]}return this},s.prototype.unbindAll=function(){var e;this._handlersAll=[];for(e in this._handlers)delete this._handlers[e];return this},s.prototype.listeners=function(e){var t,n=this._handlersAll||[];if(e)n=n.concat(this._handlers[e]||[]);else for(t in this._handlers)n=n.concat(this._handlers[t]||[]);return this._handlersAll.length?n.sort(function(e,t){return e.order-t.order}):n.slice(0)},s.prototype.emit=function(e,n){if(!this._enabled)return this;if(t(e)){for(var r in e)s.prototype.emit.call(this,r,e[r]);return this}var i,h,l,o,a,d,f,u=[].concat(e),p=[];for(n=void 0===n?{}:n,o=0,d=u.length;d>o;o++){for(h=this.listeners(u[o]),a=0,f=h.length;f>a;a++)l=h[a],i={type:u[o],data:n,target:this},l.handler.call("scope"in l?l.scope:this,i),l.once&&p.push(l);for(a=0,f=p.length;f>a;a++)p[a].parent.splice(p[a].parent.indexOf(p[a]),1)}return this},s.prototype.kill=function(){this.emit("emmett:kill"),this.unbindAll(),this._handlers=null,this._handlersAll=null,this._enabled=!1},s.prototype.disable=function(){return this._enabled=!1,this},s.prototype.enable=function(){return this._enabled=!0,this},s.version="2.1.2","undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=s),exports.Emitter=s):"function"==typeof define&&define.amd?define("emmett",[],function(){return s}):this.Emitter=s}).call(this);